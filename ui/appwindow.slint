import { HorizontalBox, VerticalBox, ComboBox, ScrollView, Button } from "std-widgets.slint";

export component MainWindow inherits Window {
    in property <image> image-data;
    out property <int> image-size: 0;
    in-out property <float> scale: 1;
    // chamge later to in or to out
   
    title: "Slint Image Filter Integration Example";
    // preferred-width: 800px;
    // preferred-height: 600px;

    VerticalBox {
        HorizontalBox {
            Button {
                text: "Original size" + scale;
                clicked => {
                    image-size = 0;
                }
            }

            Button {
                text: "Fit to window";
                clicked => {
                    image-size = 1;
                }
            }
        }

        if (image-size == 1): HorizontalBox {
            // padding-left: (parent.width > image-data.width * 1px) ? (parent.width - image-data.width * 1px) / 2 : 0px;
            Flickable {
                viewport-width: image-data.width * scale * 1px;
                viewport-height: image-data.height * scale * 1px;
                TouchArea {
                    scroll-event(event) => {
                        if (event.delta-y > 0) {
                            root.scale += 1;
                        } else {
                            root.scale -= 1;
                        }
                        accept
                    }
                    Image {
                        source: image-data;
                        image-fit: cover;
                        width: image-data.width * scale * 1px;
                        height: image-data.height * scale * 1px;
                    }
                }
            }
        }

        if (image-size == 0): Image {
            source: image-data;
            image-fit: contain;
        }
    }
}
